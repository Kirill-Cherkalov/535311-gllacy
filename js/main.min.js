let doc=document,link=doc.querySelector('.map_form_btn'),popup=doc.querySelector('.modal_feedback'),close=popup.querySelector('.feedback_form_btn'),userName=popup.querySelector('[name=user-name]'),form=popup.querySelector('form'),email=popup.querySelector('[name=user-email]'),textArea=popup.querySelector('[name=feedback]'),isStorageSupport=!0,storage='';try{storage=localStorage.getItem('userName')}catch(a){isStorageSupport=!1}function handleLink(a){a.preventDefault(),popup.classList.add('show-form'),storage?(userName.value=storage,email.focus()):userName.focus()}function closeForm(a){a.preventDefault(),popup.classList.remove('show-form'),popup.classList.remove('modal-error')}function handleForm(a){!email.value&&!textArea.value&&!userName.value?isStorageSupport&&(a.preventDefault(),popup.classList.add('modal-error')):(localStorage.setItem('userName',userName.value),localStorage.setItem('textArea',textArea.value),localStorage.setItem('email',email.value))}window.addEventListener('keydown',function(a){27===a.keyCode&&(a.preventDefault(),popup.classList.contains('show-form')&&(popup.classList.remove('show-form'),popup.classList.remove('modal-error')))}),link.addEventListener('click',handleLink),close.addEventListener('click',closeForm),form.addEventListener('submit',handleForm);